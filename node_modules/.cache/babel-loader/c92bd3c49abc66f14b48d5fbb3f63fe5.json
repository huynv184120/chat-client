{"ast":null,"code":"import _objectSpread from \"/home/huy/chat-module/chat-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/home/huy/chat-module/chat-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { room_action_type } from \"../actions/room\";\nvar initState = {\n  currentRoom: null,\n  listRoom: []\n};\n\nvar roomReducer = function roomReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case room_action_type.changeRoomInfo:\n      {\n        var index = state.listRoom.findIndex(function (room) {\n          return action.data._id === room._id;\n        });\n        state.listRoom[index] = action.data;\n        state.listRoom = _toConsumableArray(state.listRoom);\n        return _objectSpread({}, state);\n      }\n\n    case room_action_type.leaveRoom:\n      {\n        var rooms = state.listRoom.filter(function (room) {\n          return action.data._id !== room._id;\n        });\n        state.listRoom = rooms;\n        return _objectSpread({}, state);\n      }\n\n    case room_action_type.joinRoom:\n      {\n        state.listRoom = [action.data].concat(_toConsumableArray(state.listRoom));\n        return _objectSpread({}, state);\n      }\n\n    case room_action_type.selectCurrentRoom:\n      {\n        state.currentRoom = action.data._id;\n        return _objectSpread({}, state);\n      }\n\n    case room_action_type.loadRooms:\n      {\n        state.listRoom = action.data;\n        return _objectSpread({}, state);\n      }\n\n    case room_action_type.updateLastMessage:\n      {\n        var room = state.listRoom.find(function (room) {\n          return room._id === action.data.room_id;\n        });\n        room.lastMessage = action.data.lastMessage;\n        state.listRoom = _toConsumableArray(state.listRoom);\n        state.listRoom.sort(function (a, b) {\n          var t1 = a.lastMessage ? Date.parse(a.lastMessage.createdAt) : 0;\n          var t2 = b.lastMessage ? Date.parse(b.lastMessage.createdAt) : 0;\n          return t2 - t1;\n        });\n        return _objectSpread({}, state);\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n};\n\nexport default roomReducer;","map":{"version":3,"names":["room_action_type","initState","currentRoom","listRoom","roomReducer","state","action","type","changeRoomInfo","index","findIndex","room","data","_id","leaveRoom","rooms","filter","joinRoom","selectCurrentRoom","loadRooms","updateLastMessage","find","room_id","lastMessage","sort","a","b","t1","Date","parse","createdAt","t2"],"sources":["/home/huy/chat-module/chat-client/src/redux/reducers/room.js"],"sourcesContent":["import { room_action_type } from \"../actions/room\";\n\nconst initState = {\n    currentRoom: null,\n    listRoom: [],\n}\n\nconst roomReducer = (state = initState, action) => {\n\n    switch (action.type) {\n        case room_action_type.changeRoomInfo: {\n            let index = state.listRoom.findIndex((room) => (action.data._id === room._id));\n            state.listRoom[index] = action.data;\n            state.listRoom = [...state.listRoom];\n            return {...state};\n        }\n        case room_action_type.leaveRoom: {\n            const rooms = state.listRoom.filter((room) => (action.data._id !== room._id));\n            state.listRoom = rooms;\n            return { ...state };\n        }\n        case room_action_type.joinRoom: {\n            state.listRoom = [action.data, ...state.listRoom];\n            return { ...state };\n        }\n        case room_action_type.selectCurrentRoom: {\n            state.currentRoom = action.data._id;\n            return { ...state };\n        }\n        case room_action_type.loadRooms: {\n            state.listRoom = action.data;\n            return { ...state };\n        }\n        case room_action_type.updateLastMessage: {\n            const room = state.listRoom.find(room => room._id === action.data.room_id);\n            room.lastMessage = action.data.lastMessage;\n            state.listRoom = [...state.listRoom];\n            state.listRoom.sort((a, b) => {\n                const t1 = a.lastMessage ? Date.parse(a.lastMessage.createdAt) : 0;\n                const t2 = b.lastMessage ? Date.parse(b.lastMessage.createdAt) : 0;\n                return t2 - t1;\n            });\n            return { ...state };\n        }\n        default: {\n            return state;\n        }\n\n    }\n}\n\n\nexport default roomReducer;"],"mappings":";;AAAA,SAASA,gBAAT,QAAiC,iBAAjC;AAEA,IAAMC,SAAS,GAAG;EACdC,WAAW,EAAE,IADC;EAEdC,QAAQ,EAAE;AAFI,CAAlB;;AAKA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAA+B;EAAA,IAA9BC,KAA8B,uEAAtBJ,SAAsB;EAAA,IAAXK,MAAW;;EAE/C,QAAQA,MAAM,CAACC,IAAf;IACI,KAAKP,gBAAgB,CAACQ,cAAtB;MAAsC;QAClC,IAAIC,KAAK,GAAGJ,KAAK,CAACF,QAAN,CAAeO,SAAf,CAAyB,UAACC,IAAD;UAAA,OAAWL,MAAM,CAACM,IAAP,CAAYC,GAAZ,KAAoBF,IAAI,CAACE,GAApC;QAAA,CAAzB,CAAZ;QACAR,KAAK,CAACF,QAAN,CAAeM,KAAf,IAAwBH,MAAM,CAACM,IAA/B;QACAP,KAAK,CAACF,QAAN,sBAAqBE,KAAK,CAACF,QAA3B;QACA,yBAAWE,KAAX;MACH;;IACD,KAAKL,gBAAgB,CAACc,SAAtB;MAAiC;QAC7B,IAAMC,KAAK,GAAGV,KAAK,CAACF,QAAN,CAAea,MAAf,CAAsB,UAACL,IAAD;UAAA,OAAWL,MAAM,CAACM,IAAP,CAAYC,GAAZ,KAAoBF,IAAI,CAACE,GAApC;QAAA,CAAtB,CAAd;QACAR,KAAK,CAACF,QAAN,GAAiBY,KAAjB;QACA,yBAAYV,KAAZ;MACH;;IACD,KAAKL,gBAAgB,CAACiB,QAAtB;MAAgC;QAC5BZ,KAAK,CAACF,QAAN,IAAkBG,MAAM,CAACM,IAAzB,4BAAkCP,KAAK,CAACF,QAAxC;QACA,yBAAYE,KAAZ;MACH;;IACD,KAAKL,gBAAgB,CAACkB,iBAAtB;MAAyC;QACrCb,KAAK,CAACH,WAAN,GAAoBI,MAAM,CAACM,IAAP,CAAYC,GAAhC;QACA,yBAAYR,KAAZ;MACH;;IACD,KAAKL,gBAAgB,CAACmB,SAAtB;MAAiC;QAC7Bd,KAAK,CAACF,QAAN,GAAiBG,MAAM,CAACM,IAAxB;QACA,yBAAYP,KAAZ;MACH;;IACD,KAAKL,gBAAgB,CAACoB,iBAAtB;MAAyC;QACrC,IAAMT,IAAI,GAAGN,KAAK,CAACF,QAAN,CAAekB,IAAf,CAAoB,UAAAV,IAAI;UAAA,OAAIA,IAAI,CAACE,GAAL,KAAaP,MAAM,CAACM,IAAP,CAAYU,OAA7B;QAAA,CAAxB,CAAb;QACAX,IAAI,CAACY,WAAL,GAAmBjB,MAAM,CAACM,IAAP,CAAYW,WAA/B;QACAlB,KAAK,CAACF,QAAN,sBAAqBE,KAAK,CAACF,QAA3B;QACAE,KAAK,CAACF,QAAN,CAAeqB,IAAf,CAAoB,UAACC,CAAD,EAAIC,CAAJ,EAAU;UAC1B,IAAMC,EAAE,GAAGF,CAAC,CAACF,WAAF,GAAgBK,IAAI,CAACC,KAAL,CAAWJ,CAAC,CAACF,WAAF,CAAcO,SAAzB,CAAhB,GAAsD,CAAjE;UACA,IAAMC,EAAE,GAAGL,CAAC,CAACH,WAAF,GAAgBK,IAAI,CAACC,KAAL,CAAWH,CAAC,CAACH,WAAF,CAAcO,SAAzB,CAAhB,GAAsD,CAAjE;UACA,OAAOC,EAAE,GAAGJ,EAAZ;QACH,CAJD;QAKA,yBAAYtB,KAAZ;MACH;;IACD;MAAS;QACL,OAAOA,KAAP;MACH;EArCL;AAwCH,CA1CD;;AA6CA,eAAeD,WAAf"},"metadata":{},"sourceType":"module"}